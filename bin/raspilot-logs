#!/usr/bin/env python3
import glob
import os
import subprocess

from up.utils.config_reader import ConfigReader
from up.utils.path_utils import PathUtils

config = ConfigReader.instance().global_config
path = config.get('DEFAULT', 'LOG PATH')
path = PathUtils.expand_user(path)

newest_log = max(glob.iglob(os.path.join(path, '*.log')), key=os.path.getctime)
p = subprocess.Popen('tail -f %s' % newest_log, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

try:
    while True:
        print(p.stdout.readline().decode('utf-8'), end='')
except KeyboardInterrupt:
    pass
m